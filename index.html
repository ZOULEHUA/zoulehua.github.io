<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>五子棋 & 真心话大冒险</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        /* 导航按钮 */
        .nav {
            margin-top: 20px;
        }
        .nav button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
        }
        /* 各功能区 */
        .section {
            display: none;
        }
        .active {
            display: block;
        }
        /* 五子棋相关样式 */
        canvas {
            background-color: #F0D9B5;
            border: 2px solid #333;
            margin-top: 20px;
        }
        #message {
            margin-top: 10px;
            font-size: 20px;
        }
        #resetButton {
            margin-top: 10px;
            font-size: 16px;
            padding: 5px 10px;
        }
        /* 真心话大冒险相关样式 */
        #tdButtons button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
        }
        #trContent {
            margin-top: 20px;
            font-size: 18px;
            border: 1px solid #ccc;
            padding: 10px;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            min-height: 50px;
        }
    </style>
</head>
<body>
    <h1>五子棋 & 真心话大冒险</h1>
    <!-- 导航切换 -->
    <div class="nav">
        <button id="btnGomoku">五子棋</button>
        <button id="btnTruthDare">真心话大冒险</button>
    </div>

    <!-- 五子棋区 -->
    <div id="sectionGomoku" class="section active">
        <canvas id="board" width="600" height="600"></canvas>
        <div id="message">黑棋先手</div>
        <button id="resetButton">重置游戏</button>
    </div>

    <!-- 真心话大冒险区 -->
    <div id="sectionTruthDare" class="section">
        <div id="tdButtons">
            <button id="btnTruth">真心话</button>
            <button id="btnDare">大冒险</button>
        </div>
        <div id="trContent">点击上方按钮获取内容</div>
    </div>

    <script>
        /* 导航切换代码 */
        document.getElementById("btnGomoku").addEventListener("click", function(){
            document.getElementById("sectionGomoku").classList.add("active");
            document.getElementById("sectionTruthDare").classList.remove("active");
        });
        document.getElementById("btnTruthDare").addEventListener("click", function(){
            document.getElementById("sectionGomoku").classList.remove("active");
            document.getElementById("sectionTruthDare").classList.add("active");
        });

        /* ----------------- 五子棋部分 ----------------- */
        const canvas = document.getElementById("board");
        const ctx = canvas.getContext("2d");
        const boardSize = 15;  // 棋盘为 15x15
        const cellSize = 40;   // 每格 40 像素
        const offset = 20;     // 边缘间距

        let board = [];        // 二维数组：0空，1黑，2白
        let currentPlayer = 1; // 1: 黑棋先手，2: 白棋
        let gameOver = false;

        // 初始化棋盘数据
        function initBoard() {
            board = [];
            for (let i = 0; i < boardSize; i++) {
                let row = [];
                for (let j = 0; j < boardSize; j++) {
                    row.push(0);
                }
                board.push(row);
            }
            currentPlayer = 1;
            gameOver = false;
            document.getElementById("message").innerText = "黑棋先手";
        }

        // 绘制棋盘与棋子
        function drawBoard() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // 绘制背景
            ctx.fillStyle = "#F0D9B5";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            // 绘制网格
            ctx.strokeStyle = "#333";
            for (let i = 0; i < boardSize; i++) {
                ctx.beginPath();
                ctx.moveTo(offset, offset + i * cellSize);
                ctx.lineTo(offset + (boardSize - 1) * cellSize, offset + i * cellSize);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(offset + i * cellSize, offset);
                ctx.lineTo(offset + i * cellSize, offset + (boardSize - 1) * cellSize);
                ctx.stroke();
            }
            // 绘制已有棋子
            for (let i = 0; i < boardSize; i++) {
                for (let j = 0; j < boardSize; j++) {
                    if (board[i][j] !== 0) {
                        drawStone(j, i, board[i][j]);
                    }
                }
            }
        }

        // 绘制棋子
        function drawStone(x, y, player) {
            const centerX = offset + x * cellSize;
            const centerY = offset + y * cellSize;
            ctx.beginPath();
            ctx.arc(centerX, centerY, cellSize/2 - 2, 0, 2*Math.PI);
            ctx.fillStyle = (player === 1) ? "black" : "white";
            ctx.fill();
            ctx.strokeStyle = "black";
            ctx.stroke();
        }

        // 检查胜利条件（横、竖、两对角线连续五子）
        function checkWin(x, y) {
            const player = board[y][x];
            if (player === 0) return false;
            const directions = [
                {dx: 1, dy: 0},
                {dx: 0, dy: 1},
                {dx: 1, dy: 1},
                {dx: 1, dy: -1}
            ];
            for (let d = 0; d < directions.length; d++) {
                let count = 1;
                const {dx, dy} = directions[d];
                let i = 1;
                while (true) {
                    const newX = x + dx * i;
                    const newY = y + dy * i;
                    if (newX < 0 || newX >= boardSize || newY < 0 || newY >= boardSize || board[newY][newX] !== player) break;
                    count++;
                    i++;
                }
                i = 1;
                while (true) {
                    const newX = x - dx * i;
                    const newY = y - dy * i;
                    if (newX < 0 || newX >= boardSize || newY < 0 || newY >= boardSize || board[newY][newX] !== player) break;
                    count++;
                    i++;
                }
                if (count >= 5) return true;
            }
            return false;
        }

        // 处理棋盘点击事件
        canvas.addEventListener("click", function(e) {
            if (gameOver) return;
            const rect = canvas.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            const col = Math.round((clickX - offset) / cellSize);
            const row = Math.round((clickY - offset) / cellSize);
            if (col < 0 || col >= boardSize || row < 0 || row >= boardSize) return;
            if (board[row][col] !== 0) return;
            board[row][col] = currentPlayer;
            drawBoard();
            if (checkWin(col, row)) {
                document.getElementById("message").innerText = (currentPlayer === 1 ? "黑棋" : "白棋") + " 赢了！";
                gameOver = true;
                return;
            }
            currentPlayer = (currentPlayer === 1 ? 2 : 1);
            document.getElementById("message").innerText = (currentPlayer === 1 ? "黑棋" : "白棋") + " 先手";
        });

        document.getElementById("resetButton").addEventListener("click", function() {
            initBoard();
            drawBoard();
        });

        initBoard();
        drawBoard();

        /* ----------------- 真心话大冒险部分 ----------------- */
        // 以下数组内容为示例，请将其替换为你原来代码中的真心话和大冒险内容
        const truths = [
            "你最害怕什么？",
            "说出你曾经做过最尴尬的一件事。",
            "你有没有暗恋过别人？是谁？"
        ];
        const dares = [
            "模仿一个动物叫三次。",
            "大声唱一段流行歌曲。",
            "跳一段你最尴尬的舞蹈。"
        ];

        // 随机获取数组中的一项
        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        document.getElementById("btnTruth").addEventListener("click", function() {
            const item = getRandomItem(truths);
            document.getElementById("trContent").innerText = "真心话：" + item;
        });
        document.getElementById("btnDare").addEventListener("click", function() {
            const item = getRandomItem(dares);
            document.getElementById("trContent").innerText = "大冒险：" + item;
        });
    </script>
</body>
</html>
